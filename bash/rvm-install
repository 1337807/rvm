#!/bin/bash

mkdir -p ~/.rvm/src ~/.rvm/bin

cwd=`pwd`
cp $cwd/bash/rvm ~/.rvm/bin/

touch ~/.bash_profile

if [ -z "`grep '\.rvm/bin/rvm' ~/.bash_profile`" ] ; then
  echo "Adding 'source ~/.rvm' to your ~/.bash_profile."
  echo "source ~/.rvm/bin/rvm" >> ~/.bash_profile
fi

if [ -z "`grep '\.rvm/current' ~/.bash_profile`" ] ; then
  echo "Adding 'source ~/.rvm/current' ~/.bash_profile."
  echo "if [ -f ~/.rvm/current ] ; then source ~/.rvm/current ; fi" >> ~/.bash_profile
fi

if [ -z "`grep '\.profile' ~/.bash_profile`" ] ; then
  echo "Adding 'source ~/.profile' to the end of ~/.bash_profile."
  echo "if [ -f ~/.profile ] ; then source ~/.profile ; fi" >> ~/.bash_profile
fi

source ~/.rvm/bin/rvm

