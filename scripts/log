#!/usr/bin/env bash

if [[ "$rvm_trace_flag" -eq 2 ]] ; then set -x ; export rvm_trace_flag ; fi

if [[ ! -z "$2" ]] ; then level=$1 ; shift ; else level="info" ; fi

message=$1

if [[ -z "$rvm_interactive" ]] || [[ -z "$TERM" ]] || [[ "unknown" = "$TERM" ]] ; then
  case "$level" in
    debug) shift ; printf "\n<d>$message </d>"     ;;
    info)  shift ; printf "\n<i>$message </i>"     ;;
    warn)  shift ; printf "\n<w>$message </w>"     ;;
    error) shift ; printf "\n<e>$message </e>" >&2 ;;
    fail)  shift ; printf "\n<f>$message </f>" >&2 ;;
    *) printf "$message"
  esac
else
  case "$level" in
    debug) shift ; printf "\n$(tput setaf 5)$message$(tput sgr0)"     ;;
    info)  shift ; printf "\n$(tput setaf 2)$message$(tput sgr0)"     ;;
    warn)  shift ; printf "\n$(tput setaf 3)$message$(tput sgr0)"     ;;
    error) shift ; printf "\n$(tput setaf 1)$message$(tput sgr0)" >&2 ;;
    fail)  shift ; printf "\n$(tput setaf 1)$message$(tput sgr0)" >&2 ;;
    *) printf "$message"
  esac
fi

exit 0
